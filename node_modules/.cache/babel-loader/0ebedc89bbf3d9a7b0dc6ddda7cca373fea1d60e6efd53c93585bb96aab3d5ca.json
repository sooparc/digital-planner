{"ast":null,"code":"'use client';\n\nimport { useRef, useState, useEffect } from 'react';\nimport { useTimeout, useMutationObserver } from '@mantine/hooks';\nimport 'react/jsx-runtime';\nimport { getEnv } from '../../core/utils/get-env/get-env.mjs';\nimport 'clsx';\nimport '../../core/MantineProvider/Mantine.context.mjs';\nimport '../../core/MantineProvider/default-theme.mjs';\nimport '../../core/MantineProvider/MantineProvider.mjs';\nimport '../../core/MantineProvider/MantineThemeProvider/MantineThemeProvider.mjs';\nimport '../../core/MantineProvider/MantineCssVariables/MantineCssVariables.mjs';\nimport '../../core/Box/Box.mjs';\nimport '../../core/DirectionProvider/DirectionProvider.mjs';\nimport { toInt } from '../ScrollArea/utils/to-int.mjs';\nfunction isParent(parentElement, childElement) {\n  if (!childElement || !parentElement) {\n    return false;\n  }\n  let parent = childElement.parentNode;\n  while (parent != null) {\n    if (parent === parentElement) {\n      return true;\n    }\n    parent = parent.parentNode;\n  }\n  return false;\n}\nfunction useFloatingIndicator({\n  target,\n  parent,\n  ref,\n  displayAfterTransitionEnd\n}) {\n  const transitionTimeout = useRef(-1);\n  const [initialized, setInitialized] = useState(false);\n  const [hidden, setHidden] = useState(typeof displayAfterTransitionEnd === \"boolean\" ? displayAfterTransitionEnd : false);\n  const updatePosition = () => {\n    if (!target || !parent || !ref.current) {\n      return;\n    }\n    const targetRect = target.getBoundingClientRect();\n    const parentRect = parent.getBoundingClientRect();\n    const targetComputedStyle = window.getComputedStyle(target);\n    const parentComputedStyle = window.getComputedStyle(parent);\n    const borderTopWidth = toInt(targetComputedStyle.borderTopWidth) + toInt(parentComputedStyle.borderTopWidth);\n    const borderLeftWidth = toInt(targetComputedStyle.borderLeftWidth) + toInt(parentComputedStyle.borderLeftWidth);\n    const position = {\n      top: targetRect.top - parentRect.top - borderTopWidth,\n      left: targetRect.left - parentRect.left - borderLeftWidth,\n      width: targetRect.width,\n      height: targetRect.height\n    };\n    ref.current.style.transform = `translateY(${position.top}px) translateX(${position.left}px)`;\n    ref.current.style.width = `${position.width}px`;\n    ref.current.style.height = `${position.height}px`;\n  };\n  const updatePositionWithoutAnimation = () => {\n    window.clearTimeout(transitionTimeout.current);\n    if (ref.current) {\n      ref.current.style.transitionDuration = \"0ms\";\n    }\n    updatePosition();\n    transitionTimeout.current = window.setTimeout(() => {\n      if (ref.current) {\n        ref.current.style.transitionDuration = \"\";\n      }\n    }, 30);\n  };\n  const targetResizeObserver = useRef(null);\n  const parentResizeObserver = useRef(null);\n  useEffect(() => {\n    updatePosition();\n    if (target) {\n      targetResizeObserver.current = new ResizeObserver(updatePositionWithoutAnimation);\n      targetResizeObserver.current.observe(target);\n      if (parent) {\n        parentResizeObserver.current = new ResizeObserver(updatePositionWithoutAnimation);\n        parentResizeObserver.current.observe(parent);\n      }\n      return () => {\n        targetResizeObserver.current?.disconnect();\n        parentResizeObserver.current?.disconnect();\n      };\n    }\n    return void 0;\n  }, [parent, target]);\n  useEffect(() => {\n    if (parent) {\n      const handleTransitionEnd = event => {\n        if (isParent(event.target, parent)) {\n          updatePositionWithoutAnimation();\n          setHidden(false);\n        }\n      };\n      parent.addEventListener(\"transitionend\", handleTransitionEnd);\n      return () => {\n        parent.removeEventListener(\"transitionend\", handleTransitionEnd);\n      };\n    }\n    return void 0;\n  }, [parent]);\n  useTimeout(() => {\n    if (getEnv() !== \"test\") {\n      setInitialized(true);\n    }\n  }, 20, {\n    autoInvoke: true\n  });\n  useMutationObserver(mutations => {\n    mutations.forEach(mutation => {\n      if (mutation.type === \"attributes\" && mutation.attributeName === \"dir\") {\n        updatePositionWithoutAnimation();\n      }\n    });\n  }, {\n    attributes: true,\n    attributeFilter: [\"dir\"]\n  }, () => document.documentElement);\n  return {\n    initialized,\n    hidden\n  };\n}\nexport { useFloatingIndicator };","map":{"version":3,"names":["isParent","parentElement","childElement","parent","parentNode","useFloatingIndicator","target","ref","displayAfterTransitionEnd","transitionTimeout","useRef","initialized","setInitialized","useState","hidden","setHidden","updatePosition","current","targetRect","getBoundingClientRect","parentRect","targetComputedStyle","window","getComputedStyle","parentComputedStyle","borderTopWidth","toInt","borderLeftWidth","position","top","left","width","height","style","transform","updatePositionWithoutAnimation","clearTimeout","transitionDuration","setTimeout","targetResizeObserver","parentResizeObserver","useEffect","ResizeObserver","observe","disconnect","handleTransitionEnd","event","addEventListener","removeEventListener","useTimeout","getEnv","autoInvoke","useMutationObserver","mutations","forEach","mutation","type","attributeName","attributes","attributeFilter","document","documentElement"],"sources":["C:\\Users\\Soojin Park\\Desktop\\digital-planner\\node_modules\\@mantine\\core\\src\\components\\FloatingIndicator\\use-floating-indicator.ts"],"sourcesContent":["import { useEffect, useRef, useState, type RefObject } from 'react';\nimport { useMutationObserver, useTimeout } from '@mantine/hooks';\nimport { getEnv } from '../../core';\nimport { toInt } from '../ScrollArea/utils';\n\nfunction isParent(\n  parentElement: HTMLElement | EventTarget | null,\n  childElement: HTMLElement | null\n) {\n  if (!childElement || !parentElement) {\n    return false;\n  }\n\n  let parent = childElement.parentNode;\n  while (parent != null) {\n    if (parent === parentElement) {\n      return true;\n    }\n    parent = parent.parentNode;\n  }\n  return false;\n}\n\ninterface UseFloatingIndicatorInput {\n  target: HTMLElement | null | undefined;\n  parent: HTMLElement | null | undefined;\n  ref: RefObject<HTMLDivElement>;\n  displayAfterTransitionEnd?: boolean;\n}\n\nexport function useFloatingIndicator({\n  target,\n  parent,\n  ref,\n  displayAfterTransitionEnd,\n}: UseFloatingIndicatorInput) {\n  const transitionTimeout = useRef<number>(-1);\n  const [initialized, setInitialized] = useState(false);\n\n  const [hidden, setHidden] = useState(\n    typeof displayAfterTransitionEnd === 'boolean' ? displayAfterTransitionEnd : false\n  );\n\n  const updatePosition = () => {\n    if (!target || !parent || !ref.current) {\n      return;\n    }\n\n    const targetRect = target.getBoundingClientRect();\n    const parentRect = parent.getBoundingClientRect();\n\n    const targetComputedStyle = window.getComputedStyle(target);\n    const parentComputedStyle = window.getComputedStyle(parent);\n\n    const borderTopWidth =\n      toInt(targetComputedStyle.borderTopWidth) + toInt(parentComputedStyle.borderTopWidth);\n    const borderLeftWidth =\n      toInt(targetComputedStyle.borderLeftWidth) + toInt(parentComputedStyle.borderLeftWidth);\n\n    const position = {\n      top: targetRect.top - parentRect.top - borderTopWidth,\n      left: targetRect.left - parentRect.left - borderLeftWidth,\n      width: targetRect.width,\n      height: targetRect.height,\n    };\n\n    ref.current.style.transform = `translateY(${position.top}px) translateX(${position.left}px)`;\n    ref.current.style.width = `${position.width}px`;\n    ref.current.style.height = `${position.height}px`;\n  };\n\n  const updatePositionWithoutAnimation = () => {\n    window.clearTimeout(transitionTimeout.current);\n    if (ref.current) {\n      ref.current.style.transitionDuration = '0ms';\n    }\n    updatePosition();\n    transitionTimeout.current = window.setTimeout(() => {\n      if (ref.current) {\n        ref.current.style.transitionDuration = '';\n      }\n    }, 30);\n  };\n\n  const targetResizeObserver = useRef<ResizeObserver>(null);\n  const parentResizeObserver = useRef<ResizeObserver>(null);\n\n  useEffect(() => {\n    updatePosition();\n\n    if (target) {\n      targetResizeObserver.current = new ResizeObserver(updatePositionWithoutAnimation);\n      targetResizeObserver.current.observe(target);\n\n      if (parent) {\n        parentResizeObserver.current = new ResizeObserver(updatePositionWithoutAnimation);\n        parentResizeObserver.current.observe(parent);\n      }\n\n      return () => {\n        targetResizeObserver.current?.disconnect();\n        parentResizeObserver.current?.disconnect();\n      };\n    }\n\n    return undefined;\n  }, [parent, target]);\n\n  useEffect(() => {\n    if (parent) {\n      const handleTransitionEnd = (event: TransitionEvent) => {\n        if (isParent(event.target, parent)) {\n          updatePositionWithoutAnimation();\n          setHidden(false);\n        }\n      };\n\n      parent.addEventListener('transitionend', handleTransitionEnd);\n      return () => {\n        parent.removeEventListener('transitionend', handleTransitionEnd);\n      };\n    }\n\n    return undefined;\n  }, [parent]);\n\n  useTimeout(\n    () => {\n      // Prevents warning about state update without act\n      if (getEnv() !== 'test') {\n        setInitialized(true);\n      }\n    },\n    20,\n    { autoInvoke: true }\n  );\n\n  useMutationObserver(\n    (mutations) => {\n      mutations.forEach((mutation) => {\n        if (mutation.type === 'attributes' && mutation.attributeName === 'dir') {\n          updatePositionWithoutAnimation();\n        }\n      });\n    },\n    { attributes: true, attributeFilter: ['dir'] },\n    () => document.documentElement\n  );\n\n  return { initialized, hidden };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}